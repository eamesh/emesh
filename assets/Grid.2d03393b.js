import{B as j,d as I,C as k,aw as b,m as G,O as M,H as V,r as $,L as x,D as _,R as D,x as E,Z as Q,ax as T,ay as A,az as K}from"./index.78c09cee.js";import{u as L}from"./use-breakpoints.4d1d91ba.js";import{p as g}from"./responsive.3b03a350.js";import{b as X}from"./next-frame-once.3f36dc6b.js";import{g as F}from"./Space.df1d9265.js";const B=1,O=j("n-grid"),z=1,H={span:{type:[Number,String],default:z},offset:{type:[Number,String],default:0},suffix:Boolean,privateOffset:Number,privateSpan:Number,privateColStart:Number,privateShow:{type:Boolean,default:!0}};var te=I({__GRID_ITEM__:!0,name:"GridItem",alias:["Gi"],props:H,setup(){const{xGapRef:e,itemStyleRef:r,overflowRef:p}=k(O),f=M();return{overflow:p,itemStyle:r,deriveStyle:()=>{const{privateSpan:o=z,privateShow:v=!0,privateColStart:i=void 0,privateOffset:n=0}=f.vnode.props,{value:a}=e,c=b(a||0);return{display:v?"":"none",gridColumn:`${i!=null?i:`span ${o}`} / span ${o}`,marginLeft:n?`calc((100% - (${o} - 1) * ${c}) / ${o} * ${n} + ${c} * ${n})`:""}}}},render(){var e,r;return G("div",{style:[this.itemStyle,this.deriveStyle()]},(r=(e=this.$slots).default)===null||r===void 0?void 0:r.call(e,{overflow:this.overflow}))}});const Y={xs:0,s:640,m:1024,l:1280,xl:1536,xxl:1920},P=24,Z={responsive:{type:[String,Boolean],default:"self"},cols:{type:[Number,String],default:P},itemResponsive:Boolean,collapsed:Boolean,collapsedRows:{type:Number,default:1},itemStyle:[Object,String],xGap:{type:[Number,String],default:0},yGap:{type:[Number,String],default:0}};var se=I({name:"Grid",inheritAttrs:!1,props:Z,setup(e){const{mergedClsPrefixRef:r,mergedBreakpointsRef:p}=V(e),f=/^\d+$/,o=$(void 0),v=L((p==null?void 0:p.value)||Y),i=x(()=>!!(e.itemResponsive||!f.test(e.cols.toString())||!f.test(e.xGap.toString())||!f.test(e.yGap.toString()))),n=_(()=>{if(!!i.value)return e.responsive==="self"?o.value:v.value}),a=x(()=>{var s;return(s=Number(g(e.cols.toString(),n.value)))!==null&&s!==void 0?s:P}),c=x(()=>g(e.xGap.toString(),n.value)),C=x(()=>g(e.yGap.toString(),n.value)),d=s=>{o.value=s.contentRect.width},y=s=>{X(d,s)},m=$(!1),l=_(()=>{if(e.responsive==="self")return y});return D(O,{itemStyleRef:E(e,"itemStyle"),xGapRef:c,overflowRef:m}),{mergedClsPrefix:r,style:_(()=>({width:"100%",display:"grid",gridTemplateColumns:`repeat(${a.value}, minmax(0, 1fr))`,columnGap:b(c.value),rowGap:b(C.value)})),isResponsive:i,responsiveQuery:n,responsiveCols:a,handleResize:l,overflow:m}},render(){const e=()=>{var r,p,f,o,v,i;this.overflow=!1;const n=T(F(this)),a=[],{collapsed:c,collapsedRows:C,responsiveCols:d,responsiveQuery:y}=this;n.forEach(t=>{var h,S,u;if(((h=t==null?void 0:t.type)===null||h===void 0?void 0:h.__GRID_ITEM__)!==!0)return;const R=A(t),N=Number((u=g((S=R.props)===null||S===void 0?void 0:S.span,y))!==null&&u!==void 0?u:B);N!==0&&a.push({child:R,rawChildSpan:N})});let m=0;const l=(r=a[a.length-1])===null||r===void 0?void 0:r.child;if(l!=null&&l.props){const t=(p=l.props)===null||p===void 0?void 0:p.suffix;t!==void 0&&t!==!1&&(m=(o=(f=l.props)===null||f===void 0?void 0:f.span)!==null&&o!==void 0?o:B,l.props.privateSpan=m,l.props.privateColStart=d+1-m,l.props.privateShow=!0)}let s=0,w=!1;for(const{child:t,rawChildSpan:h}of a){if(w&&(this.overflow=!0),!w){const S=Number((i=g((v=t.props)===null||v===void 0?void 0:v.offset,y))!==null&&i!==void 0?i:0),u=Math.min(h+S,d)||1;if(t.props?(t.props.privateSpan=u,t.props.privateOffset=S):t.props={privateSpan:u,privateOffset:S},c){const R=s%d;u+R>d&&(s+=d-R),u+s+m>C*d?w=!0:s+=u}}w&&(t.props?t.props.privateShow!==!0&&(t.props.privateShow=!1):t.props={privateShow:!1})}return G("div",K({class:`${this.mergedClsPrefix}-grid`,style:this.style},this.$attrs),a.map(({child:t})=>t))};return this.isResponsive&&this.responsive==="self"?G(Q,{onResize:this.handleResize},{default:e}):e()}});export{se as N,te as a};
