import{h as k,j as w}from"./Tag.9b989cfb.js";import{p as x,d as N,H as K,K as E,r as g,I as B,x as H,D as _,V as L,m as l,_ as W,y as $,a0 as M,a1 as D}from"./index.78c09cee.js";import{u as q}from"./use-locale.c29a83eb.js";import{d as G}from"./light.d72ed5cc.js";import{u as J}from"./use-merged-state.c2667ee5.js";import{_ as Q}from"./Input.d62ae2d3.js";import{A as X}from"./Add.ad5e1d51.js";import{N as Y}from"./Space.df1d9265.js";function Z(t){switch(t){case"small":return"tiny";case"medium":return"small";case"large":return"medium";case"huge":return"large"}}var ee=x("dynamic-tags",[x("input",{minWidth:"var(--n-input-width)"})]);const te=Object.assign(Object.assign(Object.assign({},B.props),w),{closable:{type:Boolean,default:!0},defaultValue:{type:Array,default:()=>[]},value:Array,inputStyle:[String,Object],inputProps:Object,max:Number,tagStyle:[String,Object],renderTag:Function,onCreate:{type:Function,default:t=>t},"onUpdate:value":[Function,Array],onUpdateValue:[Function,Array],onChange:[Function,Array]});var de=N({name:"DynamicTags",props:te,setup(t){const{mergedClsPrefixRef:h,inlineThemeDisabled:u}=K(t),{localeRef:o}=q("DynamicTags"),d=E(t),{mergedDisabledRef:s}=d,c=g(""),m=g(!1),p=g(!0),v=g(null),y=B("DynamicTags","-dynamic-tags",ee,G,t,h),C=g(t.defaultValue),F=H(t,"value"),i=J(F,C),O=_(()=>o.value.add),S=_(()=>Z(t.size)),b=_(()=>s.value||!!t.max&&i.value.length>=t.max);function R(e){const{onChange:n,"onUpdate:value":f,onUpdateValue:j}=t,{nTriggerFormInput:P,nTriggerFormChange:U}=d;n&&D(n,e),j&&D(j,e),f&&D(f,e),C.value=e,P(),U()}function I(e){const n=i.value.slice(0);n.splice(e,1),R(n)}function z(e){switch(e.code){case"Enter":case"NumpadEnter":r()}}function r(e){const n=e!=null?e:c.value;if(n){const f=i.value.slice(0);f.push(n),R(f)}m.value=!1,p.value=!0,c.value=""}function T(){r()}function A(){m.value=!0,M(()=>{var e;(e=v.value)===null||e===void 0||e.focus(),p.value=!1})}const V=_(()=>{const{self:{inputWidth:e}}=y.value;return{"--n-input-width":e}}),a=u?L("dynamic-tags",void 0,V,t):void 0;return{mergedClsPrefix:h,inputInstRef:v,localizedAdd:O,inputSize:S,inputValue:c,showInput:m,inputForceFocused:p,mergedValue:i,mergedDisabled:s,triggerDisabled:b,handleInputKeyUp:z,handleAddClick:A,handleInputBlur:T,handleCloseClick:I,handleInputConfirm:r,mergedTheme:y,cssVars:u?void 0:V,themeClass:a==null?void 0:a.themeClass,onRender:a==null?void 0:a.onRender}},render(){const{mergedTheme:t,cssVars:h,mergedClsPrefix:u,onRender:o,renderTag:d}=this;return o==null||o(),l(Y,{class:[`${u}-dynamic-tags`,this.themeClass],size:"small",style:h,theme:t.peers.Space,themeOverrides:t.peerOverrides.Space,itemStyle:"display: flex;"},{default:()=>{const{mergedTheme:s,tagStyle:c,type:m,round:p,size:v,color:y,closable:C,mergedDisabled:F,showInput:i,inputValue:O,inputStyle:S,inputSize:b,inputForceFocused:R,triggerDisabled:I,handleInputKeyUp:z,handleInputBlur:r,handleAddClick:T,handleCloseClick:A,handleInputConfirm:V,$slots:a}=this;return this.mergedValue.map((e,n)=>d?d(e,n):l(k,{key:n,theme:s.peers.Tag,themeOverrides:s.peerOverrides.Tag,style:c,type:m,round:p,size:v,color:y,closable:C,disabled:F,onClose:()=>A(n)},{default:()=>typeof e=="string"?e:e.label})).concat(i?a.input?a.input({submit:V,deactivate:r}):l(Q,Object.assign({placeholder:"",size:b,style:S,autosize:!0},this.inputProps,{ref:"inputInstRef",value:O,onUpdateValue:e=>{this.inputValue=e},theme:s.peers.Input,themeOverrides:s.peerOverrides.Input,onKeyup:z,onBlur:r,internalForceFocus:R})):a.trigger?a.trigger({activate:T,disabled:I}):l(W,{dashed:!0,disabled:I,theme:s.peers.Button,themeOverrides:s.peerOverrides.Button,size:b,onClick:T},{icon:()=>l($,{clsPrefix:u},{default:()=>l(X,null)})}))}})}});export{de as _};
