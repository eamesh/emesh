import{B as k,L as N,C as $,dp as rt,dn as it,dm as lt,d as E,R as st,O as at,r as V,ac as T,a2 as O,dx as dt,$ as D,c7 as P,dy as W,M as ut,dz as pt,Q as y,a0 as ht,x as C,ds as ft,m as X,du as mt,dA as vt}from"./index.78c09cee.js";import{b as bt}from"./next-frame-once.3f36dc6b.js";import{c as xt,a as g}from"./cssr.7e31f5cb.js";import{o as wt}from"./on-fonts-ready.ae35f6df.js";const Et=k("n-internal-select-menu"),ct=k("n-internal-select-menu-body"),Q="__disabled__";function U(n){const t=$(rt,null),e=$(it,null),l=$(lt,null),a=$(ct,null);return N(()=>{var f;const{to:d}=n;return d!==void 0?d===!1?Q:d===!0?"body":d:t!=null&&t.value?(f=t.value.$el)!==null&&f!==void 0?f:t.value:e!=null&&e.value?e.value:l!=null&&l.value?l.value:a!=null&&a.value?a.value:d!=null?d:"body"})}U.tdkey=Q;U.propTo={type:[String,Object,Boolean],default:void 0};let c=null;function q(){if(c===null&&(c=document.getElementById("v-binder-view-measurer"),c===null)){c=document.createElement("div"),c.id="v-binder-view-measurer";const{style:n}=c;n.position="fixed",n.left="0",n.right="0",n.top="0",n.bottom="0",n.pointerEvents="none",n.visibility="hidden",document.body.appendChild(c)}return c.getBoundingClientRect()}function $t(n,t){const e=q();return{top:t,left:n,height:0,width:0,right:e.width-n,bottom:e.height-t}}function Y(n){const t=n.getBoundingClientRect(),e=q();return{left:t.left-e.left,top:t.top-e.top,bottom:e.height+e.top-t.bottom,right:e.width+e.left-t.right,width:t.width,height:t.height}}function Mt(n){return n.nodeType===9?null:n.parentNode}function G(n){if(n===null)return null;const t=Mt(n);if(t===null)return null;if(t.nodeType===9)return document;if(t.nodeType===1){const{overflow:e,overflowX:l,overflowY:a}=getComputedStyle(t);if(/(auto|scroll|overlay)/.test(e+a+l))return t}return G(t)}const yt=E({name:"Binder",props:{syncTargetWithParent:Boolean,syncTarget:{type:Boolean,default:!0}},setup(n){var t;st("VBinder",(t=at())===null||t===void 0?void 0:t.proxy);const e=$("VBinder",null),l=V(null),a=r=>{l.value=r,e&&n.syncTargetWithParent&&e.setTargetRef(r)};let f=[];const d=()=>{let r=l.value;for(;r=G(r),r!==null;)f.push(r);for(const v of f)D("scroll",v,x,!0)},b=()=>{for(const r of f)O("scroll",r,x,!0);f=[]},i=new Set,m=r=>{i.size===0&&d(),i.has(r)||i.add(r)},w=r=>{i.has(r)&&i.delete(r),i.size===0&&b()},x=()=>{bt(o)},o=()=>{i.forEach(r=>r())},s=new Set,p=r=>{s.size===0&&D("resize",window,h),s.has(r)||s.add(r)},u=r=>{s.has(r)&&s.delete(r),s.size===0&&O("resize",window,h)},h=()=>{s.forEach(r=>r())};return T(()=>{O("resize",window,h),b()}),{targetRef:l,setTargetRef:a,addScrollListener:m,removeScrollListener:w,addResizeListener:p,removeResizeListener:u}},render(){return dt("binder",this.$slots)}});var St=yt,jt=E({name:"Target",setup(){const{setTargetRef:n,syncTarget:t}=$("VBinder");return{syncTarget:t,setTargetDirective:{mounted:n,updated:n}}},render(){const{syncTarget:n,setTargetDirective:t}=this;return n?P(W("follower",this.$slots),[[t]]):W("follower",this.$slots)}});const z={top:"bottom",bottom:"top",left:"right",right:"left"},_={start:"end",center:"center",end:"start"},I={top:"height",bottom:"height",left:"width",right:"width"},gt={"bottom-start":"top left",bottom:"top center","bottom-end":"top right","top-start":"bottom left",top:"bottom center","top-end":"bottom right","right-start":"top left",right:"center left","right-end":"bottom left","left-start":"top right",left:"center right","left-end":"bottom right"},zt={"bottom-start":"bottom left",bottom:"bottom center","bottom-end":"bottom right","top-start":"top left",top:"top center","top-end":"top right","right-start":"top right",right:"center right","right-end":"bottom right","left-start":"top left",left:"center left","left-end":"bottom left"},Bt={"bottom-start":"right","bottom-end":"left","top-start":"right","top-end":"left","right-start":"bottom","right-end":"top","left-start":"bottom","left-end":"top"},F={top:!0,bottom:!1,left:!0,right:!1},K={top:"end",bottom:"start",left:"end",right:"start"};function At(n,t,e,l,a,f){if(!a||f)return{placement:n,top:0,left:0};const[d,b]=n.split("-");let i=b!=null?b:"center",m={top:0,left:0};const w=(s,p,u)=>{let h=0,r=0;const v=e[s]-t[p]-t[s];return v>0&&l&&(u?r=F[p]?v:-v:h=F[p]?v:-v),{left:h,top:r}},x=d==="left"||d==="right";if(i!=="center"){const s=Bt[n],p=z[s],u=I[s];if(e[u]>t[u]){if(t[s]+t[u]<e[u]){const h=(e[u]-t[u])/2;t[s]<h||t[p]<h?t[s]<t[p]?(i=_[b],m=w(u,p,x)):m=w(u,s,x):i="center"}}else e[u]<t[u]&&t[p]<0&&t[s]>t[p]&&(i=_[b])}else{const s=d==="bottom"||d==="top"?"left":"top",p=z[s],u=I[s],h=(e[u]-t[u])/2;(t[s]<h||t[p]<h)&&(t[s]>t[p]?(i=K[s],m=w(u,s,x)):(i=K[p],m=w(u,p,x)))}let o=d;return t[d]<e[I[d]]&&t[d]<t[z[d]]&&(o=z[d]),{placement:i!=="center"?`${o}-${i}`:o,left:m.left,top:m.top}}function Ot(n,t){return t?zt[n]:gt[n]}function Ct(n,t,e,l,a,f){if(f)switch(n){case"bottom-start":return{top:`${Math.round(e.top-t.top+e.height)}px`,left:`${Math.round(e.left-t.left)}px`,transform:"translateY(-100%)"};case"bottom-end":return{top:`${Math.round(e.top-t.top+e.height)}px`,left:`${Math.round(e.left-t.left+e.width)}px`,transform:"translateX(-100%) translateY(-100%)"};case"top-start":return{top:`${Math.round(e.top-t.top)}px`,left:`${Math.round(e.left-t.left)}px`,transform:""};case"top-end":return{top:`${Math.round(e.top-t.top)}px`,left:`${Math.round(e.left-t.left+e.width)}px`,transform:"translateX(-100%)"};case"right-start":return{top:`${Math.round(e.top-t.top)}px`,left:`${Math.round(e.left-t.left+e.width)}px`,transform:"translateX(-100%)"};case"right-end":return{top:`${Math.round(e.top-t.top+e.height)}px`,left:`${Math.round(e.left-t.left+e.width)}px`,transform:"translateX(-100%) translateY(-100%)"};case"left-start":return{top:`${Math.round(e.top-t.top)}px`,left:`${Math.round(e.left-t.left)}px`,transform:""};case"left-end":return{top:`${Math.round(e.top-t.top+e.height)}px`,left:`${Math.round(e.left-t.left)}px`,transform:"translateY(-100%)"};case"top":return{top:`${Math.round(e.top-t.top)}px`,left:`${Math.round(e.left-t.left+e.width/2)}px`,transform:"translateX(-50%)"};case"right":return{top:`${Math.round(e.top-t.top+e.height/2)}px`,left:`${Math.round(e.left-t.left+e.width)}px`,transform:"translateX(-100%) translateY(-50%)"};case"left":return{top:`${Math.round(e.top-t.top+e.height/2)}px`,left:`${Math.round(e.left-t.left)}px`,transform:"translateY(-50%)"};case"bottom":default:return{top:`${Math.round(e.top-t.top+e.height)}px`,left:`${Math.round(e.left-t.left+e.width/2)}px`,transform:"translateX(-50%) translateY(-100%)"}}switch(n){case"bottom-start":return{top:`${Math.round(e.top-t.top+e.height+l)}px`,left:`${Math.round(e.left-t.left+a)}px`,transform:""};case"bottom-end":return{top:`${Math.round(e.top-t.top+e.height+l)}px`,left:`${Math.round(e.left-t.left+e.width+a)}px`,transform:"translateX(-100%)"};case"top-start":return{top:`${Math.round(e.top-t.top+l)}px`,left:`${Math.round(e.left-t.left+a)}px`,transform:"translateY(-100%)"};case"top-end":return{top:`${Math.round(e.top-t.top+l)}px`,left:`${Math.round(e.left-t.left+e.width+a)}px`,transform:"translateX(-100%) translateY(-100%)"};case"right-start":return{top:`${Math.round(e.top-t.top+l)}px`,left:`${Math.round(e.left-t.left+e.width+a)}px`,transform:""};case"right-end":return{top:`${Math.round(e.top-t.top+e.height+l)}px`,left:`${Math.round(e.left-t.left+e.width+a)}px`,transform:"translateY(-100%)"};case"left-start":return{top:`${Math.round(e.top-t.top+l)}px`,left:`${Math.round(e.left-t.left+a)}px`,transform:"translateX(-100%)"};case"left-end":return{top:`${Math.round(e.top-t.top+e.height+l)}px`,left:`${Math.round(e.left-t.left+a)}px`,transform:"translateX(-100%) translateY(-100%)"};case"top":return{top:`${Math.round(e.top-t.top+l)}px`,left:`${Math.round(e.left-t.left+e.width/2+a)}px`,transform:"translateY(-100%) translateX(-50%)"};case"right":return{top:`${Math.round(e.top-t.top+e.height/2+l)}px`,left:`${Math.round(e.left-t.left+e.width+a)}px`,transform:"translateY(-50%)"};case"left":return{top:`${Math.round(e.top-t.top+e.height/2+l)}px`,left:`${Math.round(e.left-t.left+a)}px`,transform:"translateY(-50%) translateX(-100%)"};case"bottom":default:return{top:`${Math.round(e.top-t.top+e.height+l)}px`,left:`${Math.round(e.left-t.left+e.width/2+a)}px`,transform:"translateX(-50%)"}}}const Xt=g([g(".v-binder-follower-container",{position:"absolute",left:"0",right:"0",top:"0",height:"0",pointerEvents:"none",zIndex:"auto"}),g(".v-binder-follower-content",{position:"absolute",zIndex:"auto"},[g("> *",{pointerEvents:"all"})])]);var Lt=E({name:"Follower",inheritAttrs:!1,props:{show:Boolean,enabled:{type:Boolean,default:void 0},placement:{type:String,default:"bottom"},syncTrigger:{type:Array,default:["resize","scroll"]},to:[String,Object],flip:{type:Boolean,default:!0},internalShift:Boolean,x:Number,y:Number,width:String,minWidth:String,containerClass:String,teleportDisabled:Boolean,zindexable:{type:Boolean,default:!0},zIndex:Number,overlap:Boolean},setup(n){const t=$("VBinder"),e=N(()=>n.enabled!==void 0?n.enabled:n.show),l=V(null),a=V(null),f=()=>{const{syncTrigger:o}=n;o.includes("scroll")&&t.addScrollListener(i),o.includes("resize")&&t.addResizeListener(i)},d=()=>{t.removeScrollListener(i),t.removeResizeListener(i)};ut(()=>{e.value&&(i(),f())});const b=pt();Xt.mount({id:"vueuc/binder",head:!0,anchorMetaName:xt,ssr:b}),T(()=>{d()}),wt(()=>{e.value&&i()});const i=()=>{if(!e.value)return;const o=l.value;if(o===null)return;const s=t.targetRef,{x:p,y:u,overlap:h}=n,r=p!==void 0&&u!==void 0?$t(p,u):Y(s);o.style.setProperty("--v-target-width",`${Math.round(r.width)}px`),o.style.setProperty("--v-target-height",`${Math.round(r.height)}px`);const{width:v,minWidth:B,placement:S,internalShift:H,flip:J}=n;o.setAttribute("v-placement",S),h?o.setAttribute("v-overlap",""):o.removeAttribute("v-overlap");const{style:M}=o;v==="target"?M.width=`${r.width}px`:v!==void 0?M.width=v:M.width="",B==="target"?M.minWidth=`${r.width}px`:B!==void 0?M.minWidth=B:M.minWidth="";const Z=Y(o),R=Y(a.value),{left:j,top:L,placement:A}=At(S,r,Z,H,J,h),tt=Ot(A,h),{left:et,top:nt,transform:ot}=Ct(A,R,r,L,j,h);o.setAttribute("v-placement",A),o.style.setProperty("--v-offset-left",`${Math.round(j)}px`),o.style.setProperty("--v-offset-top",`${Math.round(L)}px`),o.style.transform=`translateX(${et}) translateY(${nt}) ${ot}`,o.style.transformOrigin=tt};y(e,o=>{o?(f(),m()):d()});const m=()=>{ht().then(i).catch(o=>console.error(o))};["placement","x","y","internalShift","flip","width","overlap","minWidth"].forEach(o=>{y(C(n,o),i)}),["teleportDisabled"].forEach(o=>{y(C(n,o),m)}),y(C(n,"syncTrigger"),o=>{o.includes("resize")?t.addResizeListener(i):t.removeResizeListener(i),o.includes("scroll")?t.addScrollListener(i):t.removeScrollListener(i)});const w=ft(),x=N(()=>{const{to:o}=n;if(o!==void 0)return o;w.value});return{VBinder:t,mergedEnabled:e,offsetContainerRef:a,followerRef:l,mergedTo:x,syncPosition:i}},render(){return X(vt,{show:this.show,to:this.mergedTo,disabled:this.teleportDisabled},{default:()=>{var n,t;const e=X("div",{class:["v-binder-follower-container",this.containerClass],ref:"offsetContainerRef"},[X("div",{class:"v-binder-follower-content",ref:"followerRef"},(t=(n=this.$slots).default)===null||t===void 0?void 0:t.call(n))]);return this.zindexable?P(e,[[mt,{enabled:this.mergedEnabled,zIndex:this.zIndex}]]):e}})}});export{St as V,jt as a,Lt as b,ct as c,Et as i,U as u};
